# State for 2026-01-10

- Working: `pi_base` role no longer errors with `conflicting action statements` on the admin SSH public key assert task.
- Working: `docker_engine` role now selects the correct Docker apt repo OS (`debian` vs `ubuntu`) based on `ansible_distribution`.
- Working: `docker_engine` now fails fast if `docker_engine_apt_release` does not match `ansible_distribution_release`, preventing silent repo mismatch.
- Working: `documentation/fast start.md` lists common, known-good commands and is linked from the documentation index.
- Working: `scripts/ansible-smoke.sh` can target a single host via an optional third argument (limit).
- Working: `ansible-lint` yaml line-length issues are resolved in the roles changed today.
- Working: ADR-0006 documents why tool versions are pinned and how to review/upgrade them monthly.
- Working: `.env.example` now defaults `NODE_EXPORTER_LISTEN_ADDRESS` to localhost for safer node exporter exposure.
- Working: `pi-base.yml` applies a standard tmux configuration via `tmux_config` (system-wide `/etc/tmux.conf`).
- Working: `documentation/tmux_quick_reference.md` is indexed and ready as a lightweight reference for tmux usage on boxes.
- Working: `scripts/ansible-lint.sh` is available as a lint-only alternative to the full smoke test.
- Working: `make workspace` launches a standard tmux workspace via `workspace.sh` (shell, devcontainer, editor, claude, ssh-box).
- Working: `workspace.sh` is host-oriented and fails fast if run inside a container (override with `WORKSPACE_ALLOW_IN_CONTAINER=1`).
- Working: `.env.example` documents `WORKSPACE_ALLOW_IN_CONTAINER`, and `validate-env.sh` validates it when set.
- Next: re-apply the `node_exporter` role on `rpi_box_01`, `rpi_box_02`, and `rpi_box_03` so the listen bind changes take effect on all hosts.
- Next: re-run `playbooks/pi-base.yml` on `rpi_box_03` to confirm `docker-ce` becomes available and installation completes.
- Next: use `--check --diff` on existing boxes before full apply to avoid disrupting Traefik/Pi-hole.
- Next: decide where Prometheus will run and how exporters will be reached (ADR-0011 open questions).
- Next: re-run `docker_engine` on `rpi_box_02` to confirm the `containerd.io` candidate check passes consistently after the cache update change.
- Working: `docker_engine` no longer fails dry-runs (`--check`) due to skipped apt-cache/dpkg checks or containerd candidate assertions.
